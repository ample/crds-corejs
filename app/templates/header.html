<header ng-if="!app.state.current.data.hideMenu" class="hidden-print">
    <div class="overlay-container"></div>
    <!-- Brand Bar -->
    <ng-include src="'templates/brand-bar.html'"></ng-include>

    <div id="menu">
        <div class="container">
            <div class="row">
                <!-- TODO refactor this out into it's own directive, that uses the login and registration directives. The new directive should take an argument that is the internal directive (login and/or registration)* -->
                <div class="col-xs-12 menu__container">
                    <div class="navbar-header">
                        <div ng-class="{show: menu.isMobileShowing}">
                            <button type="button" class="nav__side--toggle navbar-left hidden-md hidden-lg hidden-xl" ng-click="app.openAside('left', true)">
                                <span class="sr-only">Toggle navigation</span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </button>
                        </div>
                        <a class="navbar-brand logo" ui-sref="home" href="/"><img src="//crossroads-media.s3.amazonaws.com/images/logo.svg" alt="crossroads">
                        </a>

                        <a ui-sref="login" class="mobile-account hidden-md hidden-lg hidden-xl" ng-show="$root.username == undefined">
                          <svg viewBox="0 0 32 32" class="icon icon-user6 icon-large">
                              <use xlink:href="#user6"></use>
                          </svg>
                        </a>

                        <div class="pull-right" dropdown on-toggle="toggled(open)">
                          <a href="#" id="user-dropdown" class="mobile-account" ng-show="$root.username != undefined" dropdown-toggle>
                            <span id="current-user" class="current-user-name hidden-xs" ng-if="$root.username != undefined" ng-cloak> {{$root.username}} </span>
                            <svg viewBox="0 0 32 32" class="icon icon-user6 icon-large">
                                <use xlink:href="#user6"></use>
                            </svg>
                          </a>
                          <ul class="dropdown-menu ng-cloak" aria-labelledby="user-dropdown" ng-show="$root.username != undefined" ng-cloak>
                            <li>
                              <a ui-sref="profile">Profile</a>
                            </li>
                            <li>
                              <a ui-sref="history">Giving History</a>
                            </li>
                            <li>
                              <a ui-sref="serve-signup">Sign Up to Serve</a>
                            </li>
                            <li>
                              <a ui-sref="mytrips">My Trips</a>
                            </li>
                            <li>
                              <a ui-sref="logout" class="ng-cloak">Sign Out</a>
                            </li>
                          </ul>
                        </div>


                        <ul class="navbar--login list-unstyled">


                            <li class="hidden-xs hidden-sm" data-toggle="dropdown" ng-show="$root.username == undefined">
                                <button class="btn btn-primary" id="form-toggle" ng-click="toggleDesktopLogin(); passwordPrefix='login-dropdown'">
                                    <span>Log In</span>
                                </button>
                            </li>

                            <li>
                                <ul class="navbar--login__dropdown list-unstyled col-md-3 soft-top soft-sides" role="menu" aria-labelledby="dropdownMenu1" ng-class="{toggleOpen: loginShow}">
                                    <li role="presentation">
                                        <div class="navbar--register__container">
                                            <div class="dd_menu">
                                                <login-form></login-form>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                        <ul class="navbar--login list-unstyled visible-lg visible-md">
                            <li class="hidden-xs" data-toggle="dropdown" ng-show="$root.username == undefined">
                                <button class="btn btn-link" id="form-toggle" ng-click="toggleDesktopRegister(); passwordPrefix='registration'">
                                    <span>Create an Account</span>
                                </button>
                            </li>

                            <li>
                                <ul class="navbar--login__dropdown list-unstyled col-md-3 soft-top soft-sides" role="menu" aria-labelledby="dropdownMenu2" ng-class="{toggleOpen: registerShow}">
                                    <li role="presentation">
                                        <div class="navbar--register__container">
                                            <div class="dd_menu">
                                                <register-form></register-form>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <ng-include src="'templates/nav.html'"> </ng-include>
                </div>
            </div>
        </div>
    </div>
</header>
